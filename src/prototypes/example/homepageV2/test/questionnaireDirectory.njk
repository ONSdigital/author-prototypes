---
group: Examples
title: Example prototype
layout: example/homepage/test/2col_Layout
---
{% from "components/button/_macro.njk" import onsButton %}
{% from "components/autosuggest/_macro.njk" import onsAutosuggest %}
{% from "components/table/_macro.njk" import onsTable %}
{% from "components/breadcrumbs/_macro.njk" import onsBreadcrumbs %}


{% block head %}
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

<style>
    {# 16px font size #}
    .u-fs-16{
        font-size:16px;
    }

    {# positioning the actions button relative to the row #}
    .row-relative{
        position:relative;
    }

    {# styling the actions button #}
    .menu-container{
        width: fit-content;
        float: right;
    }

    .actionsBtn .ons-icon{
        transform: rotate(90deg);
        }
    
    .actionsBtn{
        display: flex;
        box-sizing: border-box;
        align-items: center;
        justify-content: center;
        background-color: white;
        border: 2px solid #bcbcbd;
        border-radius: 3px;
        outline: none;
        padding: 9px 6px;
        font-family: 'Open Sans', sans-serif;
        font-size: 14px;
        font-weight: bold;
        color: #707071;
        line-height: 1.35;
        cursor: pointer;
    }
    
    .actionsBtn:focus{
        background-color: #FBC900;
        border: 2px solid black;
        color: black;
    }
    
    .menu{
        display:none;
        background-color: #206095;
        padding:18px;
        list-style:none;
        width: fit-content;
        border-radius: 3px;
        border: 2px solid #003C57;
        position: absolute;
        top: 55px;
        right:0;
        z-index:1;
    }
    
    .listItemLink{
        color: white;
        margin-left: 20px;
        font-size: 16px;
        padding-bottom: 10px;
        padding-top:10px;
    }
    
    .listItemLink:hover{
        color: white;
        text-decoration: underline solid white 2px;
    }
    
    .duplicate{
        display: inline-flex;
        align-items: center;
        margin-left: 12px;
        color: white;
    }
    
    .listItemButton {
        display: inline-flex;
        box-sizing: border-box;
        width:100%;
        line-height: 1.35;
        align-items: center;
        background-color: #206095;
        color: white;
        border: 2px solid #206095;
        border-radius:3px;
        padding: 10px;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.3s, border-color 0.3s, color 0.3s;
    }
    
    .listItemButton .material-symbols-outlined {
        margin-right: 20px;
    }
    
    .listItemButton:hover {
        border: 2px solid white;
    
    }
    
    .listItemButton:focus {
        outline: none;
        background-color: #FBC900;
        border: 3px solid black;
        color: black;
    }

    {# styling the modal #}
    .modal-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8); 
        backdrop-filter: blur(3px); 
        display: none; 
        z-index: 100;
    }

    .ons-modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 101;
        display:none;
        margin:0;
    }

</style>

{% endblock %}

{% block preMain %}

{{
    onsBreadcrumbs({
        "ariaLabel": 'Back',
        "itemsList": [
            {
                "url": '/prototypes/example/homepage/test/modalTest2.html',
                "id": "backlink",
                "text": 'Back',
                "attributes": {
                    "data-attribute": "Example attribute"
                }
            }
        ]
    })
}}

{% endblock %}

{% block main %}


<div class="modal-container" id="modalContainer">
  <dialog class="ons-modal" id="modalDialog" role="dialog">
    <div class="ons-modal__content">
      <div class="ons-modal__body">
        {#<p>It appears you have been inactive for a while.</p>#}

        {% from "components/summary/_macro.njk" import onsSummary %}
        {{
            onsSummary({
                "summaries": [
                    {
                        "summaryTitle": "Are you sure you want to delete this questionniare?",
                        "groups": [
                            {
                                "rows": [
                                    {
                                        "rowItems": [
                                            {
                                                "rowTitle": "Short code",
                                                "id": "shortcode",
                                                "valueList": [
                                                    {
                                                        "text": "Copy of V3 Draft QCAS 0019"                                                    }
                                                ]
                                            },
                                            {
                                                "rowTitle": "Title",
                                                "id": "title",
                                                "valueList": [
                                                    {
                                                        "text": "Copy of Quarterly Acquisitions and Disposals of Capital Assets Survey"
                                                    }
                                                ]
                                            },
                                            {
                                                "rowTitle": "Project",
                                                "id": "project",
                                                "valueList": [
                                                    {
                                                        "text": "Annual Business Survey (ABS)"
                                                    }
                                                ]
                                            },
                                            {
                                                "rowTitle": "Owner",
                                                "id": "owner",
                                                "valueList": [
                                                    {
                                                        "text": "Deborah O'Shaughnessy"
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                ]
            })
        }}

      </div>
      <div class="ons-u-fr">
        <button type="button" class="ons-btn ons-btn--secondary ons-u-mt-s" onclick="cancelDeletion()">
            <span class="ons-btn__inner"><span class="ons-btn__text">Cancel</span>
            </span>
        </button>
        <button type="submit" class="ons-btn ons-js-modal-btn ons-u-mt-s" id="deleteButton" onclick="deleteQuestionnaire(rowId)">
        <span class="ons-btn__inner"><span class="ons-btn__text">Delete</span>
        </span>
        </button>
      </div>
    </div>
  </dialog>
</div>
    <a href="/prototypes/example/homepage/test/NewQuestionnaire">Link</a>

    <div class="ons-u-db ons-u-mt-s ons-u-mb-s">
        {{
            onsButton({
                "text": 'Create questionnaire',
                "url": '/prototypes/example/homepage/test/create/enterDetails.html'            
            })
        }}
    </div>


            <h2 class="ons-u-fs-m ons-u-mb-m" id="questionnaireCount">84 questionnaires</h2>

            <table id="basic-table" class="ons-table">
                {#<caption class="ons-table__caption">A basic table with a caption</caption>#}
                <thead class="ons-table__head">
                    <tr class="ons-table__row">
                    <th scope="col" class="ons-table__header">
                        <span class="ons-table__header-text">Short code and title</span>
                    </th>
                    <th scope="col" class="ons-table__header">
                        <span class="ons-table__header-text">Project</span>
                    </th>
                    <th scope="col" class="ons-table__header">
                        <span class="ons-table__header-text">Owner</span>
                    </th>
                    <th scope="col" class="ons-table__header">
                        <span class="ons-table__header-text">Activity</span>
                    </th>
                    <th scope="col" class="ons-table__header">
                        <span class="ons-table__header-text">Access</span>
                    </th>
                    <th scope="col" class="ons-table__header">
                        <span class="ons-table__header-text ons-u-invisible">Actions</span>
                    </th>
                    </tr>
                </thead>
                <tbody class="ons-table__body">
                    <tr class="ons-table__row row-relative" id="row1">
                    <td class="ons-table__cell"> <span class="ons-u-db ons-u-fs-s ons-u-mb-xs" >Copy of V3 Draft 0173</span><a href="#">Copy of Annual Business Survey</a></td>
                    <td class="ons-table__cell"> Annual Business Survey (ABS) </td>
                    <td class="ons-table__cell"> Stuart Davies </td>
                    <td class="ons-table__cell"> <span class="ons-u-db ons-u-fs-s ons-u-mb-xs" >Date created:</span>14th Aug 2023 <span class="ons-u-db ons-u-fs-s ons-u-mb-xs ons-u-mt-xs" >Last opened:</span>16th Aug 2023</td>
                    <td class="ons-table__cell"> Editor </td>
                    <td class="ons-table__cell">
                        <div class="menu-container">
                            <button type="button"
                                    id="menubutton1"
                                    class="actionsBtn"
                                    aria-haspopup="true"
                                    aria-controls="menu2" onclick="toggleMenu(event, 'menubutton1', 'menu1')">
                                Actions
                            <svg class="ons-icon ons-u-ml-xs" viewBox="0 0 8 13" xmlns="http://www.w3.org/2000/svg" focusable="false" fill="currentColor"><path d="M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z" transform="translate(-5.02 -1.59)"></path></svg>
                            </button>
                            <ul id="menu1"
                                role="menu"
                                aria-labelledby="menubutton" class="menu">
                                <li role="none" class="duplicate">
                                <span class="material-symbols-outlined">
                                    content_copy
                                    </span>
                                <a role="menuitem" class="listItemLink" href="#" onclick="duplicate('menubutton1', 'Copy of V3 Draft 0173', 'Copy of Monthly Business Survey')">
                                    Duplicate
                                </a>
                                </li>
                                <li role="none">
                                <button role="menuitem" class="listItemButton">
                                    <span class="material-symbols-outlined">
                                    link
                                    </span>
                                    Copy link
                                </button>
                                </li>
                                <li role="none">
                                <button role="menuitem" class="listItemButton">
                                    <span class="material-symbols-outlined">
                                    star
                                    </span>
                                    Add to starred
                                </button>
                                </li>
                                <li role="none" class="ons-u-mb-no">
                                <button role="menuitem" class="listItemButton" onclick="confirmDeletion('menubutton1', 'menu1', 'Copy of V3 Draft 0173', 'Copy of Monthly Business Survey', 'Annual Business Survey (ABS)', 'Stuart Davies', 'row1')">
                                    <span class="material-symbols-outlined">
                                    delete
                                    </span>
                                    Delete
                                </button>
                                </li>
                            </ul>
                        </div>
                    </td>
                    </tr>
                    <tr class="ons-table__row row-relative" id="row2">
                    <td class="ons-table__cell"> <span class="ons-u-db ons-u-fs-s ons-u-mb-xs" >Copy of V4 Draft 0173</span><a href="#">Draft</a></td>
                    <td class="ons-table__cell"> Annual Business Survey (ABS) </td>
                    <td class="ons-table__cell"> Stuart Davies </td>
                    <td class="ons-table__cell"> <span class="ons-u-db ons-u-fs-s ons-u-mb-xs" >Date created:</span>16th Aug 2023 <span class="ons-u-db ons-u-fs-s ons-u-mb-xs ons-u-mt-xs" >Last opened:</span>17th Aug 2023</td>
                    <td class="ons-table__cell"> Editor </td>
                    <td class="ons-table__cell">
                        <div class="menu-container">
                            <button type="button"
                                    id="menubutton2"
                                    class="actionsBtn"
                                    aria-haspopup="true"
                                    aria-controls="menu2" onclick="toggleMenu(event, 'menubutton2', 'menu2')">
                                Actions
                            <svg class="ons-icon ons-u-ml-xs" viewBox="0 0 8 13" xmlns="http://www.w3.org/2000/svg" focusable="false" fill="currentColor"><path d="M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z" transform="translate(-5.02 -1.59)"></path></svg>
                            </button>
                            <ul id="menu2"
                                role="menu"
                                aria-labelledby="menubutton" class="menu">
                                <li role="none" class="duplicate">
                                <span class="material-symbols-outlined">
                                    content_copy
                                    </span>
                                <a role="menuitem" class="listItemLink" href="https://www.w3.org/">
                                    Duplicate
                                </a>
                                </li>
                                <li role="none">
                                <button role="menuitem" class="listItemButton">
                                    <span class="material-symbols-outlined">
                                    link
                                    </span>
                                    Copy link
                                </button>
                                </li>
                                <li role="none">
                                <button role="menuitem" class="listItemButton">
                                    <span class="material-symbols-outlined">
                                    star
                                    </span>
                                    Add to starred
                                </button>
                                </li>
                                <li role="none" class="ons-u-mb-no">
                                <button role="menuitem" class="listItemButton" onclick="confirmDeletion('menubutton2', 'menu2', 'Copy of V4 Draft 0173', 'Draft', 'Annual Business Survey (ABS)', 'Stuart Davies', 'row2')">
                                    <span class="material-symbols-outlined">
                                    delete
                                    </span>
                                    Delete
                                </button>
                                </li>
                            </ul>
                        </div>
                    </td>
                    </tr>
                    <tr class="ons-table__row row-relative" id="row3">
                    <td class="ons-table__cell"> <span class="ons-u-db ons-u-fs-s ons-u-mb-xs" >Final draft</span><a href="#">Trust in Government</a></td>
                    <td class="ons-table__cell">Trust in Government</td>
                    <td class="ons-table__cell">Lisa Brown</td>
                    <td class="ons-table__cell"> <span class="ons-u-db ons-u-fs-s ons-u-mb-xs" >Date created:</span>14th Aug 2023 <span class="ons-u-db ons-u-fs-s ons-u-mb-xs ons-u-mt-xs" >Last opened:</span>16th Aug 2023</td>
                    <td class="ons-table__cell">View-only</td>
                    <td class="ons-table__cell">
                        <div class="menu-container">
                            <button type="button"
                                    id="menubutton3"
                                    class="actionsBtn"
                                    aria-haspopup="true"
                                    aria-controls="menu2" onclick="toggleMenu(event, 'menubutton3', 'menu3')">
                                Actions
                            <svg class="ons-icon ons-u-ml-xs" viewBox="0 0 8 13" xmlns="http://www.w3.org/2000/svg" focusable="false" fill="currentColor"><path d="M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z" transform="translate(-5.02 -1.59)"></path></svg>
                            </button>
                            <ul id="menu3"
                                role="menu"
                                aria-labelledby="menubutton" class="menu">
                                <li role="none" class="duplicate">
                                <span class="material-symbols-outlined">
                                    content_copy
                                    </span>
                                <a role="menuitem" class="listItemLink" href="#" onclick="duplicate('menubutton3', 'Copy of V3 Draft 0173', 'Copy of Monthly Business Survey')">
                                    Duplicate
                                </a>
                                </li>
                                <li role="none">
                                <button role="menuitem" class="listItemButton">
                                    <span class="material-symbols-outlined">
                                    link
                                    </span>
                                    Copy link
                                </button>
                                </li>
                                <li role="none">
                                <button role="menuitem" class="listItemButton" id="AddTo1" onclick="addToMyQuestionnaires('row3', 'menubutton3', 'menu3', 'Final draft', 'Trust in Government', 'Trust in Government', 'Lisa Brown', '1 Aug 2023', '2 Aug 2023', 'View-only', 'AddTo1')">
                                    <span class="material-symbols-outlined">
                                        bookmark_add
                                    </span>
                                    Add to My questionnaires
                                </button>
                                </li>
                            </ul>
                        </div>
                    </td>
                    </tr>
                </tbody>
            </table>




{% endblock %}

{% block bodyEnd %}

<script>

{# Rendering new questionnaires #}
    var table = document.getElementById("basic-table");
    var counter = parseInt(sessionStorage.getItem("questionnaireCounter")) || 0;
    var tbody = table.querySelector("tbody");


    for (var i = 1; i <= counter; i++) {
        if(sessionStorage.getItem('Access_' + i) != 'View-only' && sessionStorage.getItem('NoDisplayInDirectory_' + i) == null){
        if(sessionStorage.getItem("Buttonid_" + i)){
        var row = tbody.insertRow(0);
        row.classList.add("ons-table__row", "row-relative");
        var ROWid = sessionStorage.getItem('rowID' + i);
        row.id = ROWid;

        var td1 = row.insertCell(0);
        td1.classList.add("ons-table__cell");
        td1.innerHTML = `<span class="ons-u-db ons-u-fs-s ons-u-mb-xs">${sessionStorage.getItem('Shortcode_' + i)}</span><a href="#">${sessionStorage.getItem('Title_' + i)}</a>`;

        var td2 = row.insertCell(1);
        td2.classList.add("ons-table__cell");
        td2.textContent = sessionStorage.getItem('Project_' + i);

        var td3 = row.insertCell(2);
        td3.classList.add("ons-table__cell");
        td3.textContent = "Lauren Dowling";

        var td4 = row.insertCell(3);
        td4.classList.add("ons-table__cell");
        td4.innerHTML = `<span class="ons-u-db ons-u-fs-s ons-u-mb-xs">Date created:</span>27 Aug 2023<span class="ons-u-db ons-u-fs-s ons-u-mb-xs ons-u-mt-xs">Last opened:</span>27 Aug 2023`;

        if(sessionStorage.getItem("Access_" + i) == 'Editor'){
            var td5 = row.insertCell(4);
            td5.classList.add("ons-table__cell");
            td5.textContent = "Editor";
        }

        if(sessionStorage.getItem("Access_" + i) == 'View-only'){
            var td5 = row.insertCell(4);
            td5.classList.add("ons-table__cell");
            td5.textContent = "View-only";
        }

        var td6 = row.insertCell(5);
        td6.classList.add("ons-table__cell");

        var menuContainer = document.createElement("div");
        menuContainer.className = "menu-container";

        var buttonId = sessionStorage.getItem('Buttonid_' + i);
        var ulId = sessionStorage.getItem('ULid' + i);

        var actionsButton = document.createElement("button");
        actionsButton.type = "button";
        actionsButton.id = buttonId;
        actionsButton.className = "actionsBtn";
        actionsButton.setAttribute("aria-haspopup", "true");
        actionsButton.setAttribute("aria-controls", ulId);
        actionsButton.setAttribute("onclick", `toggleMenu(event, '${sessionStorage.getItem('Buttonid_' + i)}', '${sessionStorage.getItem('ULid' + i)}')`);

        var SVGIcon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        SVGIcon.classList.add("ons-icon", "ons-u-ml-xs");
        SVGIcon.setAttribute("viewBox", "0 0 8 13");
        SVGIcon.setAttribute("xmlns", "http://www.w3.org/2000/svg");
        SVGIcon.setAttribute("focusable", "false");
        SVGIcon.setAttribute("fill", "currentColor");

        var path = document.createElementNS("http://www.w3.org/2000/svg", "path");        
        path.setAttribute("d", "M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z");
        path.setAttribute("transform", "translate(-5.02 -1.59)");

        SVGIcon.appendChild(path);
        actionsButton.appendChild(document.createTextNode(" Actions"));
        actionsButton.appendChild(SVGIcon);


        var ul = document.createElement("ul");
        ul.id = ulId;
        ul.role = "menu";
        ul.setAttribute("aria-labelledby", buttonId);
        ul.className = "menu";

        var duplicateLi = document.createElement("li");
        duplicateLi.role = "none";
        duplicateLi.className = "duplicate";

        var duplicateSpan = document.createElement("span");
        duplicateSpan.className = "material-symbols-outlined";
        duplicateSpan.textContent = "content_copy";

        var duplicateLink = document.createElement("a");
        duplicateLink.role = "menuitem";
        duplicateLink.className = "listItemLink";
        duplicateLink.href = "#";
        duplicateLink.textContent = "Duplicate";
        duplicateLink.setAttribute("onclick", `duplicate('${buttonId}', '${sessionStorage.getItem('Shortcode_' + i)}', '${sessionStorage.getItem('Title_' + i)}')`);

        duplicateLi.appendChild(duplicateSpan);
        duplicateLi.appendChild(duplicateLink);

        ul.appendChild(duplicateLi);

        var copyLinkLi = document.createElement("li");
        copyLinkLi.role = "none";

        var copyLinkButton = document.createElement("button");
        copyLinkButton.role = "menuitem";
        copyLinkButton.className = "listItemButton";

        var copyLinkSpan = document.createElement("span");
        copyLinkSpan.className = "material-symbols-outlined";
        copyLinkSpan.textContent = "link";

        var buttonText = document.createTextNode("Copy link");
        
        copyLinkButton.appendChild(copyLinkSpan);
        copyLinkButton.appendChild(buttonText);


        copyLinkLi.appendChild(copyLinkButton);
        ul.appendChild(copyLinkLi);


{# Remove from My questionnaires #}
        
        if(sessionStorage.getItem("Access_" + i) == 'View-only'){
            var removeFromMyQuestionnairesLi = document.createElement("li");
            removeFromMyQuestionnairesLi.role = "none";

            var removeFromMyQuestionnairesButton = document.createElement("button");
            removeFromMyQuestionnairesButton.role = "menuitem";
            removeFromMyQuestionnairesButton.className = "listItemButton";

            var removeFromMyQuestionnairesSpan = document.createElement("span");
            removeFromMyQuestionnairesSpan.className = "material-symbols-outlined";
            removeFromMyQuestionnairesSpan.textContent = "bookmark_remove";

            var RemoveText = document.createTextNode("Remove from My questionnaires");

            removeFromMyQuestionnairesButton.appendChild(removeFromMyQuestionnairesSpan);
            removeFromMyQuestionnairesButton.appendChild(RemoveText);

            removeFromMyQuestionnairesLi.appendChild(removeFromMyQuestionnairesButton);
            ul.appendChild(removeFromMyQuestionnairesLi);
        }

{# Delete button #}
        var deleteLi = document.createElement("li");
        deleteLi.role = "none";
        deleteLi.className = "ons-u-mb-no";

        var deleteButton = document.createElement("button");
        deleteButton.role = "menuitem";
        deleteButton.className = "listItemButton";
        deleteButton.setAttribute("onclick", `confirmDeletion('${sessionStorage.getItem('Buttonid_' + i)}', '${sessionStorage.getItem('ULid' + i)}', '${sessionStorage.getItem('Shortcode_' + i)}', '${sessionStorage.getItem('Title_' + i)}', '${sessionStorage.getItem('Project_' + i)}', 'Lauren Dowling', '${sessionStorage.getItem('rowID' + i)}')`);

        var deleteSpan = document.createElement("span");
        deleteSpan.className = "material-symbols-outlined";
        deleteSpan.textContent = "delete";

        var DeleteText = document.createTextNode("Delete");

        deleteButton.appendChild(deleteSpan);
        deleteButton.appendChild(DeleteText);

        deleteLi.appendChild(deleteButton);
        ul.appendChild(deleteLi);


        menuContainer.appendChild(actionsButton);
        menuContainer.appendChild(ul);
        td6.appendChild(menuContainer);
    
    }
}
    }

function toggleMenu(event, Buttonid, ULid) {
  event.stopPropagation(); 
  console.log('executing');
    console.log('Buttonid:', Buttonid);
  console.log('ULid:', ULid);
  var menu = document.getElementById(ULid);
  console.log(menu);
  var svgIcon = document.querySelector(`#${Buttonid} .ons-icon`);

  if (menu.style.display === "none" || menu.style.display === "") {
    menu.style.display = "block";
    document.addEventListener("click", closeMenuOnClickOutside.bind(null, ULid));
    svgIcon.style.transform = "rotate(-90deg)"; 
    svgIcon.style.padding = "0 0 0 4px";
  } else {
    menu.style.display = "none";
    document.removeEventListener("click", closeMenuOnClickOutside.bind(null, ULid));
    svgIcon.style.transform = "rotate(90deg)"; 
    svgIcon.style.padding = "0 0 0 0"; 
  }
}

function closeMenuOnClickOutside(ULid, event) {
  var menu = document.getElementById(ULid);
  
  if (!menu.contains(event.target)) {
    menu.style.display = "none";
    document.removeEventListener("click", closeMenuOnClickOutside.bind(null, ULid));
  }
}

function confirmDeletion(Buttonid, ULid, shortcode, title, project, owner, rowId){
    console.log('confirm deletion');
    toggleMenu(event, Buttonid, ULid);
    var container = document.getElementById('modalContainer');
    container.style.display = "block";
    var modal = document.getElementById('modalDialog');
    modal.style.display = "block";

    {# Updates the values in the modal #}
    var shortcodeSpan = document.querySelector('#shortcode .ons-summary__text');
    shortcodeSpan.textContent = shortcode;
    var titleSpan = document.querySelector('#title .ons-summary__text');
    titleSpan.textContent = title;
    var projectSpan = document.querySelector('#project .ons-summary__text');
    if (project != 'null'){
        console.log(project);
        projectSpan.textContent = project;
    }
    else{
        projectSpan.textContent = '';

    }
    var ownerSpan = document.querySelector('#owner .ons-summary__text');
    ownerSpan.textContent = owner;
    
    {# Defines which row to delete #}

    var deleteButton = document.getElementById('deleteButton');
    deleteButton.addEventListener('click', function() {
    deleteQuestionnaire(Buttonid, ULid, shortcode, title, project, owner, rowId);

    var match = Buttonid.match(/_(\d+)$/);
    if (match) {
        var numberAfterUnderscore = match[1];

        sessionStorage.removeItem("Buttonid_" + numberAfterUnderscore);
        sessionStorage.removeItem("ULid" + numberAfterUnderscore);
        if(sessionStorage.getItem("Shortcode_" + numberAfterUnderscore)){
            sessionStorage.removeItem("Shortcode_" + numberAfterUnderscore);
        }
        sessionStorage.removeItem("Title_" + numberAfterUnderscore);
        if(sessionStorage.getItem("Project_" + numberAfterUnderscore)){
            sessionStorage.removeItem("Project_" + numberAfterUnderscore);
        }
        sessionStorage.removeItem("rowID" + numberAfterUnderscore);

        deleteQuestionnaire(rowId);
    }

    });

}

function cancelDeletion(){
    console.log('hello');
    var container = document.getElementById('modalContainer');
    container.style.display = "none";
    var modal = document.getElementById('modalDialog');
    modal.style.display = "none";
}

function deleteQuestionnaire(Buttonid, ULid, shortcode, title, project, owner, rowId) {
console.log(rowId);
console.log('deletingrow');
var row = document.getElementById(rowId);
console.log(document.getElementById(rowId));
    if (row) {
        row.remove();
        var container = document.getElementById('modalContainer');
        container.style.display = "none";
        var modal = document.getElementById('modalDialog');
        modal.style.display = "none";

        var questionnaireCountElement = document.getElementById('questionnaireCount');
        var currentCount = parseInt(questionnaireCountElement.textContent, 10);
        if (!isNaN(currentCount) && currentCount > 0) {
        questionnaireCountElement.textContent = (currentCount - 1) + ' questionnaires';
        }


    }
}

function duplicate(Buttonid, shortcode, title) {
    var button = document.getElementById(Buttonid);
    button.style.border = "2px solid #003C57";
    button.style.backgroundColor = "#206095";
    button.style.color = "white"; 

    if (shortcode) {
        sessionStorage.setItem('duplicateShortcode', shortcode);
    }
    if (title) {
        sessionStorage.setItem('duplicateTitle', title);
    }

    window.location.href = "/prototypes/example/homepage/test/duplicate/enterDetails";
}


{# checking if the view-only questionnaire 
has been added to My questionnaires#}

    var buttons = document.querySelectorAll('button');

    for (var i = 0; i < buttons.length; i++) {
        var button = buttons[i];
        if (button.textContent.includes("Add to My questionnaires")) {
            var buttonId = button.id;
            if(sessionStorage.getItem(buttonId)){
                button.innerHTML = "<span class='material-symbols-outlined'>bookmark_remove</span>Remove from My questionnaires";

            }
        }
    }


function addToMyQuestionnaires(rowId, Buttonid, ULid, shortcode, title, project, owner, dateCreated, dateLastOpened, access, addToBtnID) {

    var button = document.getElementById(addToBtnID);
    if (button.textContent.includes("Add to My questionnaires")) {
        button.innerHTML = "<span class='material-symbols-outlined'>bookmark_remove</span>Remove from My questionnaires";

        var counter = parseInt(sessionStorage.getItem('questionnaireCounter')) || 0;
        counter++;
        sessionStorage.setItem('questionnaireCounter', counter);
        sessionStorage.setItem('questionnaireCounter' + addToBtnID, counter);

        sessionStorage.setItem('rowID' + counter, rowId);
        sessionStorage.setItem('Buttonid_' + counter, Buttonid);
        sessionStorage.setItem('ULid' + counter, ULid);
        sessionStorage.setItem('Shortcode_' + counter, shortcode);
        sessionStorage.setItem('Title_' + counter, title);
        sessionStorage.setItem('Project_' + counter, project);
        sessionStorage.setItem('Owner_' + counter, owner);
        sessionStorage.setItem('DateCreated_' + counter, dateCreated);
        sessionStorage.setItem('DateLastOpened_' + counter, dateLastOpened);
        sessionStorage.setItem('Access_' + counter, access);
        sessionStorage.setItem('AddToBtnID_' + counter, addToBtnID);

    } else {
        button.innerHTML = "<span class='material-symbols-outlined'>bookmark_add</span>Add to My questionnaires";
        var counterAtTimeOfAdd = sessionStorage.getItem('questionnaireCounter' + addToBtnID);
        sessionStorage.removeItem('rowID' + counterAtTimeOfAdd);
        sessionStorage.removeItem('Buttonid_' + counterAtTimeOfAdd);
        sessionStorage.removeItem('ULid' + counterAtTimeOfAdd);
        sessionStorage.removeItem('Shortcode_' + counterAtTimeOfAdd);
        sessionStorage.removeItem('Title_' + counterAtTimeOfAdd);
        sessionStorage.removeItem('Project_' + counterAtTimeOfAdd);
        sessionStorage.removeItem('Owner_' + counterAtTimeOfAdd);
        sessionStorage.removeItem('DateCreated_' + counterAtTimeOfAdd);
        sessionStorage.removeItem('DateLastOpened_' + counterAtTimeOfAdd);
        sessionStorage.removeItem('Access_' + counterAtTimeOfAdd);
        sessionStorage.removeItem(addToBtnID);

    }
    

}


</script>
{% endblock %}
